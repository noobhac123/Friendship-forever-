<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Missing Our Connection</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Pacifico&display=swap');

        :root {
            --bg-grad-start: #6a11cb; 
            --bg-grad-mid: #8E2DE2;   
            --bg-grad-end: #4A00E0;   
            
            --card-bg: #ffffff;
            --text-primary: #333740; 
            --text-secondary: #5c626e; 
            --accent-color: #7c4dff; 
            --input-border: #d9dce1;
            --input-focus-border: var(--accent-color);
            --shadow-color: rgba(74, 0, 224, 0.15); 
            --button-text: #ffffff;
            --button-bg-start: var(--accent-color);
            --button-bg-end: #536dfe; 
            --footer-text-color: rgba(255, 255, 255, 0.85);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--bg-grad-start), var(--bg-grad-mid), var(--bg-grad-end));
            background-size: 300% 300%;
            animation: gradientFlow 20s ease infinite alternate;
            padding: 20px;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
        
        .container {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 20px; 
            box-shadow: 0 12px 35px var(--shadow-color);
            text-align: center;
            max-width: 480px; /* Adjusted for medium text */
            width: 95%;
            animation: popInSmooth 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
            position: relative;
            z-index: 1;
        }

        @keyframes popInSmooth {
            0% { opacity: 0; transform: scale(0.9) translateY(15px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .greeting-icon {
            font-size: 3em; /* Slightly smaller for balance */
            color: var(--accent-color);
            margin-bottom: 18px;
            display: inline-block;
            animation: gentleBob 3s infinite ease-in-out;
        }

        @keyframes gentleBob {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-6px); }
        }

        h1 {
            font-family: 'Pacifico', cursive;
            font-size: 2.3em; /* Adjusted for message length */
            color: var(--accent-color);
            margin-bottom: 20px; /* More space before message */
            font-weight: 400;
        }
        
        .highlight-name {
            font-weight: 600;
            color: var(--accent-color);
            padding: 2px 6px;
            border-radius: 4px;
            background-color: rgba(124, 77, 255, 0.1); 
        }

        p.message {
            font-size: 1.08em; /* Good for medium text */
            font-weight: 400; /* For readability */
            line-height: 1.75; 
            margin-bottom: 30px;
            color: var(--text-secondary);
        }
        
        .input-group {
            margin-bottom: 30px;
            text-align: left;
        }

        label {
            display: block;
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 7px;
            font-weight: 600;
            text-transform: uppercase; 
            letter-spacing: 0.5px;
        }

        input[type="text"] {
            width: 100%; 
            padding: 13px 15px;
            border: 1px solid var(--input-border);
            border-radius: 10px;
            font-size: 1em;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.3s ease;
            background-color: #fdfdff; 
            color: var(--text-primary);
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--input-focus-border);
            box-shadow: 0 0 0 3px rgba(124, 77, 255, 0.2);
            background-color: #fff;
        }

        button {
            background: linear-gradient(135deg, var(--button-bg-start), var(--button-bg-end));
            color: var(--button-text);
            border: none;
            padding: 15px 28px;
            font-size: 1.05em;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 9px;
            width: 100%;
            text-shadow: 0 1px 1px rgba(0,0,0,0.15);
        }

        button:hover {
            transform: translateY(-2px) scale(1.01);
            box-shadow: 0 7px 14px rgba(74, 0, 224, 0.2);
        }
        
        button svg {
            width: 19px;
            height: 19px;
            fill: currentColor;
        }

        .footer-note {
            margin-top: 28px;
            font-size: 0.9em;
            color: var(--footer-text-color); 
            font-weight: 300;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .container {
                padding: 30px 25px;
                border-radius: 16px;
            }
            h1 {
                font-size: 2em;
            }
            .greeting-icon {
                font-size: 2.6em;
            }
            p.message {
                font-size: 1em;
            }
            button {
                padding: 13px 22px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="greeting-icon">ðŸ«‚</div> <!-- Hugging face icon for friendship -->
        <h1 id="mainHeading">Missing Our Friendship</h1>
        <p id="messageText" class="message">
            Hey there, my friend. Just wanted to reach out and say I've been thinking about you and our friendship a lot lately. Life gets busy, but the good times and great conversations we've shared always stick with me. Truly missing our connection and hoping we can catch up soon. You're one of a kind!
        </p>
        
        <div class="input-group">
            <label for="currentUserNameInput">Your Name:</label>
            <input type="text" id="currentUserNameInput" placeholder="So they know it's from you!">
        </div>

        <button id="shareButton">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3z"/></svg>
            Share This Thought
        </button>
    </div>

    <p class="footer-note">Friendships are precious. Keep them close.</p>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const receivedFromName = urlParams.get('name'); 

            const currentUserNameInput = document.getElementById('currentUserNameInput');
            const shareButton = document.getElementById('shareButton');
            const mainHeading = document.getElementById('mainHeading');
            const messageTextElement = document.getElementById('messageText');
            const greetingIconElement = document.querySelector('.greeting-icon');

            const defaultMessageInitial = `
                Hey there, my friend. Just wanted to reach out and say I've been thinking about you and our friendship a lot lately. Life gets busy, but the good times and great conversations we've shared always stick with me. Truly missing our connection and hoping we can catch up soon. You're one of a kind!
                <br><br>Want to send a similar warm thought to another friend? Add your name below.
            `;

            if (receivedFromName) {
                mainHeading.innerHTML = `A Message For You`;
                greetingIconElement.innerHTML = 'ðŸ’Œ'; // Letter icon for received message
                messageTextElement.innerHTML = `
                    Hi! Your friend <span class="highlight-name">${decodeURIComponent(receivedFromName)}</span> sent this message because they're genuinely missing your friendship and the special bond you share. They're cherishing the memories and would love to reconnect.
                    <br><br>Touched by this? You can share this feeling with another dear friend by adding your name.
                `;
            } else {
                messageTextElement.innerHTML = defaultMessageInitial;
            }

            shareButton.addEventListener('click', () => {
                const currentSenderName = currentUserNameInput.value.trim();
                if (!currentSenderName) {
                    alert('Please add your name so your friend knows who this heartfelt message is from!');
                    currentUserNameInput.focus();
                    return;
                }

                const shareUrl = `${window.location.origin}${window.location.pathname}?name=${encodeURIComponent(currentSenderName)}`;
                
                let shareDialogTitle = "Missing Our Friendship!";
                let shareDialogText = `Hey! Just wanted to say I'm thinking of you and really missing our friendship. Hope you're doing well! - ${currentSenderName}`;

                if (receivedFromName) { 
                    shareDialogTitle = "Passing on a Friendship Thought!";
                }
                
                const shareData = {
                    title: shareDialogTitle,
                    text: shareDialogText,
                    url: shareUrl,
                };

                if (navigator.share) {
                    navigator.share(shareData)
                        .then(() => console.log('Message shared successfully!'))
                        .catch((error) => {
                            console.error('Error sharing:', error);
                            alert(`Could not open share dialog. Here's the link to copy: ${shareUrl}`);
                        });
                } else {
                    alert(`Your browser doesn't support direct sharing. Please copy this link: ${shareUrl}`);
                }
            });
        });
    </script>

</body>
</html>
